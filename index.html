<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Poster - Cedars Sinai</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Custom Animation for Modals */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-animate {
            animation: fadeIn 0.2s ease-out forwards;
        }
        .term {
            border-bottom: 2px dotted #60a5fa; /* blue-400 */
            cursor: help;
        }
        .term:hover {
            background-color: #dbeafe; /* blue-100 */
            color: #1e40af; /* blue-800 */
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-900 font-sans min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row gap-6 items-start md:items-center">
            
            <!-- Logo -->
            <div class="hidden md:flex flex-col items-center justify-center w-24 h-24 bg-white/10 rounded-full border-2 border-white/20 shrink-0">
                <div class="text-3xl font-bold">CS</div>
                <div class="text-[0.6rem] uppercase tracking-wider">Cedars Sinai</div>
            </div>

            <div class="flex-1">
                <h1 class="text-2xl md:text-3xl lg:text-4xl font-extrabold leading-tight mb-3">
                    Cyanobacteria-derived RNA aptamer supports prostate cancer hormone sensitivity
                </h1>
                <div class="text-sm md:text-base text-blue-100 font-light space-y-1">
                    <p><strong>Authors:</strong> Carlos D. Cruz-Hernández¹, Bethany Smith¹, Sandrine Billet¹, Manish Thiruvalluvan¹, et al.</p>
                    <p class="opacity-80 text-xs md:text-sm">1. Department of Medicine, Cedars-Sinai Medical Center, Los Angeles, CA 90048</p>
                </div>

                <!-- Action Buttons -->
                <div class="mt-5 flex flex-col sm:flex-row sm:items-center gap-4">
                    <div class="flex items-center gap-3">
                        <a href="https://pubmed.ncbi.nlm.nih.gov/40293223/" target="_blank" rel="noopener noreferrer" 
                           class="inline-flex items-center gap-2 bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all hover:scale-105">
                            <i data-lucide="external-link" class="w-4 h-4"></i> Read Paper
                        </a>
                        <a href="images/poster-annotated.jpg" download="poster-annotated.jpg" 
                           class="inline-flex items-center gap-2 bg-blue-900/50 hover:bg-blue-900/70 text-white px-4 py-2 rounded-lg text-sm font-medium border border-blue-400/30 transition-all hover:border-blue-300">
                            <i data-lucide="download" class="w-4 h-4"></i> Save Poster
                        </a>
                    </div>
                    
                    <div class="flex items-center gap-2 text-xs text-blue-200 bg-blue-900/30 p-2 rounded border border-blue-500/30">
                        <i data-lucide="book" class="w-3 h-3"></i>
                        <span>Tip: Click <span class="border-b-2 border-dotted border-blue-300">underlined words</span> for definitions.</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 max-w-[1600px] mx-auto w-full p-4 md:p-6 lg:p-8">

        <!-- Graphical Abstract -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6">
            <div class="flex items-center justify-between mb-4 border-b border-slate-100 pb-2">
                <div class="flex items-center gap-2">
                    <i data-lucide="zap" class="text-blue-600 w-5 h-5"></i>
                    <h2 class="text-lg font-bold text-slate-800">Study Overview (Graphical Abstract)</h2>
                </div>
                <div class="text-xs text-slate-400 flex items-center gap-1">
                    <i data-lucide="mouse-pointer-click" class="w-3 h-3"></i>
                    Click icons to view details
                </div>
            </div>
            
            <div class="flex flex-col md:flex-row items-center justify-around gap-6 text-center">
                <!-- Step 1 -->
                <div onclick="openModal('fig1')" class="flex flex-col items-center group cursor-pointer relative transition-transform hover:scale-105">
                    <div class="w-20 h-20 bg-green-50 border-2 border-green-100 rounded-full flex items-center justify-center mb-3 group-hover:border-green-400 group-hover:shadow-md transition-all shadow-sm">
                        <i data-lucide="microscope" class="w-8 h-8 text-green-600"></i>
                    </div>
                    <p class="font-bold text-sm text-slate-700 group-hover:text-blue-700">Cyanobacteria</p>
                    <p class="text-xs text-slate-500 italic">(S. elongatus)</p>
                </div>
                
                <i data-lucide="arrow-right" class="hidden md:block text-slate-300 w-8 h-8"></i>
                <i data-lucide="arrow-down" class="md:hidden text-slate-300 w-8 h-8"></i>

                <!-- Step 2 -->
                <div onclick="openModal('fig2')" class="flex flex-col items-center group cursor-pointer relative transition-transform hover:scale-105">
                    <div class="w-20 h-20 bg-blue-50 border-2 border-blue-100 rounded-full flex items-center justify-center mb-3 group-hover:border-blue-400 group-hover:shadow-md transition-all shadow-sm">
                        <i data-lucide="dna" class="w-8 h-8 text-blue-600"></i>
                    </div>
                    <p class="font-bold text-sm text-slate-700 group-hover:text-blue-700">RNA Aptamer</p>
                    <p class="text-xs text-slate-500 italic">56merA15</p>
                </div>

                <i data-lucide="arrow-right" class="hidden md:block text-slate-300 w-8 h-8"></i>
                <i data-lucide="arrow-down" class="md:hidden text-slate-300 w-8 h-8"></i>

                <!-- Step 3 -->
                <div onclick="openModal('fig3')" class="flex flex-col items-center group cursor-pointer relative transition-transform hover:scale-105">
                     <div class="bg-slate-50 border-2 border-slate-200 rounded-lg p-3 w-40 text-left shadow-inner group-hover:border-orange-300 group-hover:bg-orange-50">
                       <div class="flex items-center gap-2 mb-2 pb-1 border-b border-slate-200 group-hover:border-orange-200">
                          <i data-lucide="activity" class="w-3 h-3 text-orange-500"></i>
                          <span class="text-xs font-bold text-slate-700">Mechanism</span>
                       </div>
                       <ul class="text-[11px] text-slate-600 space-y-1">
                         <li>• Binds L-Gln</li>
                         <li>• Activates GLS</li>
                         <li>• Depletes Extracellular L-Gln</li>
                       </ul>
                    </div>
                </div>

                <i data-lucide="arrow-right" class="hidden md:block text-slate-300 w-8 h-8"></i>
                <i data-lucide="arrow-down" class="md:hidden text-slate-300 w-8 h-8"></i>

                <!-- Step 4 -->
                <div onclick="openModal('fig5')" class="flex flex-col items-center group cursor-pointer relative transition-transform hover:scale-105">
                    <div class="w-20 h-20 bg-red-50 border-2 border-red-100 rounded-full flex items-center justify-center mb-3 group-hover:border-red-400 group-hover:shadow-md transition-all shadow-sm">
                        <i data-lucide="target" class="w-8 h-8 text-red-600"></i>
                    </div>
                    <p class="font-bold text-sm text-slate-700 group-hover:text-blue-700">Tumor Suppression</p>
                    <p class="text-xs text-slate-500 italic">Sensitivity Restored</p>
                </div>
            </div>
        </div>

        <!-- Poster Grid (Container for JS Injection) -->
        <div id="poster-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 h-full auto-rows-min">
            <!-- JavaScript will populate this -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-200 p-4 text-center text-slate-500 text-xs">
        <p>Interactive Poster Digital Twin • Created for Enhanced Accessibility</p>
    </footer>

    <!-- Modal Template (Hidden by default) -->
    <div id="modal-backdrop" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm hidden" onclick="closeModal()">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden modal-animate" onclick="event.stopPropagation()">
            <!-- Modal Header -->
            <div class="p-4 bg-blue-700 text-white flex justify-between items-center shrink-0">
                <div class="flex items-center gap-2">
                    <div id="modal-icon-container"></div>
                    <h2 id="modal-title" class="text-xl font-bold truncate">Title</h2>
                </div>
                <button onclick="closeModal()" class="p-1 hover:bg-white/20 rounded-full transition-colors">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Modal Content -->
            <div id="modal-content" class="p-6 overflow-y-auto grow prose prose-blue max-w-none">
                <!-- Content Injected Here -->
            </div>
            
            <!-- Modal Footer -->
            <div class="p-4 border-t bg-gray-50 text-right shrink-0">
                <button onclick="closeModal()" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg text-sm font-medium transition-colors">
                    Close Detail
                </button>
            </div>
        </div>
    </div>

    <!-- Dictionary Tooltip (Hidden by default) -->
    <div id="tooltip" class="fixed hidden z-[60] max-w-xs bg-slate-800 text-white text-xs rounded shadow-xl p-3 pointer-events-none animate-in fade-in zoom-in duration-150">
        <div id="tooltip-title" class="font-bold mb-1 border-b border-slate-600 pb-1 text-blue-200"></div>
        <div id="tooltip-desc" class="leading-relaxed"></div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA ---
        
        const DICTIONARY = {
            "Adenocarcinoma": "A type of cancer that forms in the glandular tissue, which lines certain internal organs and makes and releases substances in the body, such as mucus, digestive juices, or other fluids.",
            "Androgen receptor": "A protein that binds to androgens (male hormones like testosterone). It plays a key role in the development and maintenance of the male reproductive system and is a major driver of prostate cancer.",
            "Glutamine": "An amino acid that is a building block of protein and a critical energy source for many cancer cells.",
            "Riboswitches": "Segments of an mRNA molecule that bind to a specific small molecule, changing the production of the proteins encoded by the mRNA.",
            "Cyanobacteria": "A phylum of bacteria that obtain their energy through photosynthesis. They are the only photosynthetic prokaryotes able to produce oxygen.",
            "Aptamer": "Oligonucleotide or peptide molecules that bind to a specific target molecule. Aptamers are essentially 'chemical antibodies'.",
            "Allosteric": "Relating to the alteration of the activity of a protein through the binding of an effector molecule at a specific site.",
            "Glutaminase": "An enzyme that converts glutamine to glutamate and ammonia, playing a key role in metabolism.",
            "Paracrine": "Relating to hormones which are released into the surrounding tissues and act on neighboring cells.",
            "Xenografts": "A tissue graft or organ transplant from a donor of a different species from the recipient (e.g., human tumor cells in a mouse).",
            "Orthotopic": "Occurring at the normal place. In cancer models, this means implanting tumor cells into the organ where the cancer originated (e.g., prostate cancer cells into the mouse prostate).",
            "Kd": "The dissociation constant, a measure of how tightly a ligand binds to a protein. A lower Kd indicates tighter binding.",
            "Seahorse experiment": "An assay using the Seahorse analyzer to measure cellular bioenergetics (respiration and glycolysis) in real-time.",
            "Trypan blue": "A dye used to distinguish live cells from dead cells. Dead cells take up the dye and appear blue, while live cells exclude it.",
            "FOXM1": "Forkhead Box M1, a transcription factor that regulates the expression of genes essential for cell proliferation and DNA repair.",
            "Nanogold": "Gold nanoparticles used to label or detect specific biomolecules.",
            "Oligonucleotides": "Short DNA or RNA molecules, oligomers, that have a wide range of applications in genetic testing, research, and forensics."
        };

        // Helper to generate image HTML
        function getImgHtml(src, alt, placeholder) {
            return `
            <div class="mb-4 group relative w-full">
                <img src="${src}" alt="${alt}" 
                    class="w-full h-auto rounded-lg shadow-md border border-gray-200"
                    onerror="this.onerror=null; this.parentNode.innerHTML='<div class=\\'w-full h-64 bg-gray-50 rounded flex flex-col items-center justify-center border-2 border-dashed border-gray-300 mb-4 p-4 text-center\\'><i data-lucide=\\'image\\' class=\\'w-8 h-8 text-gray-300 mb-2\\'></i><span class=\\'text-gray-500 italic mb-2 font-medium\\'>${placeholder}</span><div class=\\'text-xs text-red-400 bg-red-50 px-2 py-1 rounded border border-red-100 max-w-full truncate\\'>Missing: ${src}</div></div>'; lucide.createIcons();"
                />
            </div>`;
        }

        // Helper for Terms
        function t(word, display) {
            return `<span class="term" data-word="${word}">${display || word}</span>`;
        }

        const POSTER_DATA = [
            {
                id: 'abstract', title: 'Abstract', icon: 'file-text',
                summary: 'Prostate adenocarcinoma (PCa) resistance to androgen receptor (AR) signaling inhibitor therapy is associated with elevated glutamine (L-Gln)...',
                content: `
                    <div class="space-y-4">
                        <p>Prostate ${t('Adenocarcinoma', 'adenocarcinoma')} (PCa) resistance to ${t('Androgen receptor')} (AR) signaling inhibitor therapy is associated with elevated ${t('Glutamine', 'glutamine')} (L-Gln), but the underlying mechanism and therapeutic options stay unresolved.</p>
                        <p>${t('Glutamine')} sensors, present in conserved ${t('Riboswitches', 'riboswitches')} (glnA), control nitrogen metabolism in many organisms, like ${t('Cyanobacteria', 'cyanobacteria')}. Iterative in silico modifications of glnA found in <em>Synechococcus elongatus</em> and thermodynamic analysis of a 56mer ${t('Aptamer', 'aptamer')} resulted in high L-Gln specificity and affinity.</p>
                        <p><strong>Key Finding:</strong> The optimized ${t('Aptamer', 'aptamer')} depleted L-Gln from PCa cells by both L-Gln sequestration and the recruitment of extracellular ${t('Glutaminase', 'glutaminase')} activity, serving as an ${t('Allosteric', 'allosteric')} activator.</p>
                    </div>`
            },
            {
                id: 'intro', title: 'Introduction', icon: 'info',
                summary: 'Prostate cancer therapy resistance is a significant factor leading to cancer mortality in American men...',
                content: `
                    <div class="space-y-4">
                        <p>Prostate cancer therapy resistance is a significant factor leading to cancer mortality in American men. Androgen signaling plays a critical role in the development and progression of prostate cancer (PCa). Accordingly, it is the primary target for metastatic PCa and can complement first line therapies for localized disease.</p>
                        <p>However, inherent to the disease, there are multiple mechanisms can lead to PCa castrate resistance (CRPC), inclusive of ${t('Androgen receptor', 'androgen receptor')} (AR) amplification or loss, expression of AR splice variants, as well as ${t('Paracrine', 'paracrine')} factors.</p>
                        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-600">
                            <h4 class="font-bold text-blue-900">Hypothesis</h4>
                            <p class="text-sm text-blue-800 mt-1">We reasoned that interrupting L-Gln uptake by its extracellular depletion in a tumor-specific manner can be a therapeutic strategy bypassing metabolic adaptation of a specific enzyme or transporter.</p>
                        </div>
                    </div>`
            },
            {
                id: 'fig1', title: 'Fig 1: Synechococcus elongatus glnA aptamer optimization', icon: 'microscope',
                summary: 'Optimization of the glnA aptamer through in silico modifications.',
                content: `
                    <div class="space-y-4">
                        ${getImgHtml('images/fig1.png', 'Figure 1', "Place 'fig1.png' in images folder")}
                        <p><strong>(A)</strong> Sunburst plot illustrates the top level ${t('Cyanobacteria', 'cyanobacteria')} taxonomic group in the center.</p>
                        <p><strong>(B)</strong> Secondary structure showing the range of 'bulges' Watson-Crick G-C pair through P1 and B-Loop (blue dashed line).</p>
                        <p><strong>(C)</strong> 3D structure of the 56mer bound to L-Gln within the B loop pocket.</p>
                    </div>`
            },
            {
                id: 'fig2', title: 'Fig 2: 56merA15-mediated L-Gln depletion', icon: 'activity',
                summary: 'Characterization of the aptamer\'s ability to deplete L-Gln.',
                content: `
                    <div class="space-y-4">
                        ${getImgHtml('images/fig2.png', 'Figure 2', "Place 'fig2.png' in images folder")}
                        <p>Characterization of L-Gln binding ${t('Aptamer', 'aptamers')}. Short complementary ${t('Oligonucleotides', 'oligonucleotides')} were used to identify the L-Gln binding pocket through ${t('Nanogold', 'nanogold')} binding assay.</p>
                        <p>The ${t('Kd')} was calculated to be 24.3 nM, indicating high affinity binding.</p>
                    </div>`
            },
            {
                id: 'fig3', title: 'Fig 3: GLS - Aptamer cooperation', icon: 'zap',
                summary: 'Investigation of the cooperation between Glutaminase (GLS) and the aptamer.',
                content: `
                    <div class="space-y-4">
                        ${getImgHtml('images/fig3.png', 'Figure 3', "Place 'fig3.png' in images folder")}
                        <p>The interaction enhances the enzymatic activity, serving as an ${t('Allosteric', 'allosteric')} activator for ${t('Glutaminase', 'GLS')}, leading to more efficient L-Gln depletion in the extracellular space.</p>
                    </div>`
            },
            {
                id: 'fig4', title: 'Fig 4: L-Gln regulation of FGF8 and ARSi sensitivity', icon: 'activity',
                summary: 'Impact of L-Gln depletion on FGF8 expression and drug sensitivity.',
                content: `
                    <div class="space-y-4">
                        ${getImgHtml('images/fig4.png', 'Figure 4', "Place 'fig4.png' in images folder")}
                        <p>Impact of L-Gln depletion on 22Rv1 cells.</p>
                        <ul class="list-disc pl-5 space-y-2 text-sm">
                            <li><strong>(A)</strong> ${t('Seahorse experiment')} results showing oxygen consumption rates.</li>
                            <li><strong>(B)</strong> RNA Sequencing analysis of C4-2B and 22Rv1.</li>
                            <li><strong>(E)</strong> FGF8 promoter was tested in the presence and absence of 56merA15.</li>
                        </ul>
                    </div>`
            },
            {
                id: 'fig5', title: 'Fig 5: 56merA15 effect in vivo', icon: 'microscope',
                summary: 'Testing the efficacy of the 56merA15 aptamer in live models.',
                content: `
                    <div class="space-y-4">
                        ${getImgHtml('images/fig5.png', 'Figure 5', "Place 'fig5.png' in images folder")}
                        <p>L-Gln depletion complements AR inhibition. Surviving 22Rv1 cells were quantified by ${t('Trypan blue', 'trypan blue')} exclusion.</p>
                        <p>${t('Orthotopic')} graft tissues from mice treated with apalutamide were evaluated for the expression of ${t('FOXM1')}.</p>
                    </div>`
            },
            {
                id: 'fig6', title: 'Fig 6: Tumor targeting by aptamer functionalization', icon: 'target',
                summary: 'Using gold nanoparticles (AuNPs) for targeted delivery.',
                content: `
                    <div class="space-y-4">
                        ${getImgHtml('images/fig6.png', 'Figure 6', "Place 'fig6.png' in images folder")}
                        <p>Targeted L-Gln depletion by 56merA15-AuNP support enzalutamide sensitivity.</p>
                        <div class="bg-yellow-50 p-3 rounded border border-yellow-200"><p class="text-sm text-yellow-800"><strong>Observation:</strong> Absorbance measured by UV spectrophotometry.</p></div>
                        <p>Subcutaneous 22Rv1/CAF ${t('Xenografts', 'xenografts')} were expanded for 2 weeks.</p>
                    </div>`
            },
            {
                id: 'discussion', title: 'Discussion', icon: 'book-open',
                summary: 'PCa resistance to AR signaling inhibitor therapy is a leading cause of mortality...',
                content: `
                    <div class="space-y-4">
                        <p>Multiple approaches can be taken to address the observed elevation in L-Gln associated with hormone therapy resistance.</p>
                        <p>Our work revealed a novel ${t('Aptamer', 'aptamer')} with catalytic enhancer properties for L-Gln depletion in coupling ${t('Glutaminase', 'glutaminase')} activity.</p>
                    </div>`
            },
            {
                id: 'references', title: 'References', icon: 'book',
                summary: 'Key citations for this study.',
                content: `
                    <ol class="list-decimal pl-5 space-y-1 text-xs">
                        <li>Siegel RL, Giaquinto AN, Jemal A. Cancer statistics, 2024. CA Cancer J Clin 2024;74:12-49.</li>
                        <li>Xu L, Zhao E, Butler W, Xu H, Song N, Chen X, et al. Targeting glutamine metabolism... Oncogene 2022;41:1641-56.</li>
                        <li>Mishra, Rajeev, et al. "Stromal Epigenetic Alterations Drive Metabolic and Neuroendocrine Prostate Cancer Reprogramming." J Clin Invest 2018.</li>
                        <li>Ames TD, Breaker RR. Bacterial aptamers that selectively bind glutamine. RNA Biol 2011;8:82-9.</li>
                    </ol>`
            }
        ];

        // --- RENDER FUNCTIONS ---

        function renderGrid() {
            const grid = document.getElementById('poster-grid');
            const columns = [[], [], [], []];
            
            // Distribute items into columns (Mocking the Masonry/Grid layout)
            POSTER_DATA.forEach((item, index) => {
                if(index < 2) columns[0].push(item);
                else if(index < 5) columns[1].push(item);
                else if(index < 7) columns[2].push(item);
                else columns[3].push(item);
            });

            columns.forEach(colItems => {
                const colDiv = document.createElement('div');
                colDiv.className = 'flex flex-col gap-4';
                colItems.forEach(item => {
                    const card = document.createElement('div');
                    card.className = "group relative bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden cursor-pointer hover:shadow-xl hover:border-blue-400 transition-all duration-300 flex flex-col";
                    card.onclick = () => openModal(item.id);
                    card.innerHTML = `
                        <div class="bg-blue-900 text-white p-2 px-3 flex justify-between items-center">
                            <h3 class="font-bold text-xs uppercase tracking-wider truncate flex-1">${item.title}</h3>
                            <i data-lucide="maximize-2" class="w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                        </div>
                        <div class="p-4 flex-1 flex flex-col relative">
                            <div class="text-gray-600 text-sm line-clamp-6 leading-relaxed">${item.summary}</div>
                            <div class="absolute inset-0 bg-blue-50/0 group-hover:bg-blue-50/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none">
                                <span class="bg-blue-600 text-white text-xs px-3 py-1 rounded-full shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform">Click to Read</span>
                            </div>
                        </div>
                    `;
                    colDiv.appendChild(card);
                });
                grid.appendChild(colDiv);
            });
        }

        function openModal(id) {
            const data = POSTER_DATA.find(d => d.id === id);
            if(!data) return;

            document.getElementById('modal-title').innerText = data.title;
            document.getElementById('modal-icon-container').innerHTML = `<i data-lucide="${data.icon}" class="w-5 h-5"></i>`;
            document.getElementById('modal-content').innerHTML = data.content;
            
            const modal = document.getElementById('modal-backdrop');
            modal.classList.remove('hidden');
            
            // Refresh icons inside the newly injected modal content
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('modal-backdrop').classList.add('hidden');
            hideTooltip();
        }

        // --- TOOLTIP LOGIC ---
        const tooltip = document.getElementById('tooltip');
        
        function showTooltip(e, word) {
            const definition = DICTIONARY[word];
            if(!definition) return;

            document.getElementById('tooltip-title').innerText = word;
            document.getElementById('tooltip-desc').innerText = definition;
            
            tooltip.classList.remove('hidden');
            
            // Position
            const x = e.clientX;
            const y = e.clientY;
            
            // Basic boundary check
            const tooltipRect = tooltip.getBoundingClientRect();
            let top = y - tooltipRect.height - 10;
            let left = x - (tooltipRect.width / 2);

            tooltip.style.top = `${top}px`;
            tooltip.style.left = `${left}px`;
        }

        function hideTooltip() {
            tooltip.classList.add('hidden');
        }

        // Event Delegation for Terms inside Modal
        document.getElementById('modal-content').addEventListener('click', (e) => {
            if(e.target.classList.contains('term')) {
                e.stopPropagation();
                showTooltip(e, e.target.dataset.word);
            } else {
                hideTooltip();
            }
        });

        // Initialize
        renderGrid();
        lucide.createIcons();

    </script>
</body>
</html>




